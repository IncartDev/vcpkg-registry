# Приватный регистр vcpkg с собственными пакетами

На данный момент добавлен только пакет FileUnv. Ниже представлена инструкция с описанием добавления новых пакетов, а также пример загрузки и использования пакетов из этого приватного регистра.

## Инструкция добавления нового пакета в регистр.

Положим, что мы хотим добавить пакет с именем `somepkg`, который находится в репозитории по ссылке `https://github.com/SomeUsr/somepkg`.

### **1. Создание порта** 

В директории `ports` создайте папку, одноимённую пакету, в данном случае - `somepkg`. В этой папке нужно создать файлы `portfile.cmake` и `vcpkg.json`. С правилами их оформления можно ознакомиться [здесь](https://learn.microsoft.com/en-us/vcpkg/examples/packaging-github-repos), а в качестве примера можно увидеть, как это реализовано в пакете `fileunv`.

### **2. Установка версий**

В директории `versions` необходимо создать папку, в имени которой будет первая буква пакета и дефис (аналогично реализовано у `fileunv`), в данном случае это будет папка `s-`. В ней необходимо создать файл одноимённый пакету - `somepkg.json`. Содержимое данного файла можно скопировать из аналогичных с изменением версии и удалением содержимого поля `git-tree`, к нему вернёмся чуть позже. 

Далее необходимо дополнить файл `baseline.json` из этой директории своим пакетом.

После всех операций необходимо сделать commit произведённых изменений.

### **3. Обновление git-tree**

Теперь необходимо в терминале, в корне директории репозитория, вписать следующую команду:

    $ git rev-parse HEAD:ports/somepkg/

В ответ на выполнение данной команды вам будет выдан 40-значный код, значение которого нужно вставить в поле `git-tree` в файле `/versions/s-/somepkg.json`. После этого можно делать новый commit и push изменений в репозиторий. Теперь новый пакет можно использовать!

## Пример использования.
В [этом репозитории](https://github.com/IncartDev/vcpkg-registry-example) представлен пример использования пакета из данного регистра.

